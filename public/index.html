<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social App - Login</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="unauthenticated">
    <div class="auth-container">
        <div class="auth-box card">
            <div class="auth-header">
                <h1>SocialSphere</h1>
                <p>Connect with the world specifically.</p>
            </div>

            <!-- Login Form -->
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Log In</button>
            </form>

            <!-- Signup Form (Hidden by default) -->
            <form id="signupForm" class="hidden">
                <div class="form-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Sign Up</button>
            </form>

            <div class="auth-footer">
                <p id="toggleAuth">Don't have an account? <a href="#">Sign up</a></p>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        // Page specific logic
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const toggleAuth = document.getElementById('toggleAuth');
        const toggleLink = toggleAuth.querySelector('a');

        const toggleHandler = (e) => {
            e.preventDefault();
            if (loginForm.classList.contains('hidden')) {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                toggleAuth.innerHTML = 'Don\'t have an account? <a href="#">Sign up</a>';
            } else {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
                toggleAuth.innerHTML = 'Already have an account? <a href="#">Log in</a>';
            }
            // Re-bind listener because innerHTML replaced elements
            toggleAuth.querySelector('a').addEventListener('click', toggleHandler);
        };

        toggleLink.addEventListener('click', toggleHandler);

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            App.login(email, password);
        });

        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('signupUsername').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            App.signup(username, email, password);
        });

        // Redirect if already logged in
        if (localStorage.getItem('user')) {
            window.location.href = '/feed.html';
        }
    </script>
</body>
</html>
